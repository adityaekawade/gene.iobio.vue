<template>
  <div class="Pedigree">
    <!--<h1>{{ pedTxt }}</h1>-->

    <div id="pedigrees"></div>
  </div>

</template>

<script>

  import * as pedigreejs from '../../js/pedigreejs'

  export default {
    name: 'Pedigree',
    props: {
      pedTxtProp: String,
      default: ''
    },

    data() {
      return {
        opts: {
          "targetDiv": "pedigree",
          labels: ['alleles', 'NA'],
          // DEBUG: true
        }
      }
    },
    mounted: function() {
      this.buildPed();
    },

    watch: {},

    methods: {
      buildPed: function () {
        let self = this;

        console.log("inside buildPed");

        $('#pedigree').remove();
        $('#pedigrees').append($("<div id='pedigree' style=\"height: 100%; width: 100%;\"></div>"));

        console.log(self.pedTxtProp);
        self.opts.dataset = io.readLinkage(self.pedTxtProp);
        console.log("self.opts.dataset", self.opts.dataset);
        self.opts = ptree.build(self.opts);
        console.log("self.opts", self.opts);
      }
    }
  }

</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>

  .Pedigree {
    /*white-space: pre;*/
    width: 100%;
    height: 100%;
  }

  #pedigrees svg>rect {
    background-color: rgb(240, 250, 254);

  }

  #pedigree{
    width: 100%;
    height: 100%;
  }

  #pedigrees{
    width: 100%;
    height: 100%;
  }

</style>
